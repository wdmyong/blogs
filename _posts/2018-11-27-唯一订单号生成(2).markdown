---
layout: post
title: 唯一订单号生成(2)
---

### 本地实现
#### 原理
```
通过系统生成
```
#### 方式
```
1. 时间戳
2. UUID
```
#### 优点
```
1. 实现简单
2. 不依赖资源
```
#### 缺点
```
1. 时间戳只到毫秒级，并发有限，不止有限制，简直不可用
2. UUID是不可读字符串，36的长度有点长(1000线程，百万量级下，4秒能搞定，3秒不行)
```
#### 改进
```
1. 时间戳可通过加入用户信息、随机串实现，可用且生成速度快(1000线程，百万量级下，1秒扛不下，2秒足矣)
2. UUID可通过截取策略减小长度
2.1 uuid的hashCode+random串(1000线程，百万量级下，比较耗时，1000线程5秒内执行不完)
2.2 uuid直播截取+random串(1000线程，百万量级下，比上面的好些，4秒内能执行完，但3秒内也执行不完)
```
#### 总结
```
1. 改进版的时间戳方案，在集群模式下添加机器号，可实现高并发，且唯一生成
2. UUID原始长度过长，截取版本文实验模式下无法证明不会重复
```

#### 时间戳源码 **[timestamp && timestampExt](https://github.com/wdmyong/blogCode?__blank){:target="_blank"}**

#### UUID源码 **[Uuid && UuidExt](https://github.com/wdmyong/blogCode?__blank){:target="_blank"}**